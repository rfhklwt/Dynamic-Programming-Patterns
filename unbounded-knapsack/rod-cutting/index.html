<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/libs/katex/katex.min.css"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/libs/highlight/github.min.css"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/css/franklin.css"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/css/poole_hyde.css"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <title>Rod Cutting</title> <script src="/Dynamic-Programming-Patterns/libs/lunr/lunr.min.js"></script> <script src="/Dynamic-Programming-Patterns/libs/lunr/lunr_index.js"></script> <script src="/Dynamic-Programming-Patterns/libs/lunr/lunrclient.min.js"></script> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <br> <img src="/Dynamic-Programming-Patterns/assets/infra/DP.svg" style="width: 160px; height: auto; display: inline"> <h1> <div style="line-height:18px; font-size: 20px; opacity: 0.85"><a href="/Dynamic-Programming-Patterns/">Dynamic Programming Patterns</a></div> </h1> <div style="line-height:18px; font-size: 15px; opacity: 0.85">by <a href="https://github.com/rfhklwt">Inia Owlet</a></div> </div> <br> <style> </style> <nav class=sidebar-nav  style="opacity: 0.9"> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/"><b>Overview</b></a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/introduction"><b>Introduction</b></a> <br> <div class=course-section >Pattern 1: 0/1 Knapsack</div> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/"><b>1.0</b> - 0/1 Knapsack</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/equal-subset-sum-partition/"><b>1.1</b> - Equal Subset Sum Partition</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/subset-sum/"><b>1.2</b> - Subset Sum</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/minimum-subset-sum-difference/"><b>1.3</b> - Minimum Subset Sum Difference</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/count-of-subset-sum/"><b>1.4</b> - Count of Subset Sum</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/target-sum/"><b>1.5</b> - Target Sum</a> <div class=course-section >Pattern 2: Unbounded Knapsack</div> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/unbounded-knapsack/"><b>2.0</b> - Unbouned Knapsack</a> <a class="sidebar-nav-item active" href="/Dynamic-Programming-Patterns/unbounded-knapsack/rod-cutting/"><b>2.1</b> - Rod Cutting</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/unbounded-knapsack/coin-change/"><b>2.2</b> - Coin Change</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/unbounded-knapsack/minimum-coin-change/"><b>2.3</b> - Minimum Coin Change</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/unbounded-knapsack/maximum-ribbon-cut/"><b>2.4</b> - Maximum Ribbon Cut</a> <div class=course-section >Pattern 3: Fibonacci Numbers</div> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/fibonacci-numbers/"><b>3.0</b> - Fibonacci Numbers</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/fibonacci-numbers/staircase/"><b>3.1</b> - Staircase</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/fibonacci-numbers/number-factors/"><b>3.2</b> - Number factors</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/fibonacci-numbers/minimum-jumps-to-reach-the-end/"><b>3.3</b> - Minimum jumps to reach the end</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/fibonacci-numbers/minimum-jumps-with-fee/"><b>3.4</b> - Minimum jumps with fee</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/fibonacci-numbers/house-thief/"><b>3.5</b> - House thief</a> <div class=course-section >Pattern 4: Palindromic Subsequence</div> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/palindromic-subsequence/"><b>4.0</b> - Longest Palindromic Subsequence</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/palindromic-subsequence/longest-palindromic-substring/"><b>4.1</b> - Longest Palindromic Substring</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/palindromic-subsequence/count-of-palindromic-substrings/"><b>4.2</b> - Count of Palindromic Substrings</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/palindromic-subsequence/minimum-deletions-in-a-string-to-make-it-a-palindrome/"><b>4.3</b> - Minimum Deletions in a String to make it a Palindrome</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/palindromic-subsequence/palindromic-partitioning/"><b>4.4</b> - Palindromic Partitioning</a> <div class=course-section >Pattern 5: Longest Common Substring</div> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/"><b>5.0</b> - Longest Common Substring</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/longest-common-subsequence/"><b>5.1</b> - Longest Common Subsequence</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/minimum-deletions&insertions-to-transform-a-string-into-another/"><b>5.2</b> - Minimum Deletions & Insertions to Transform a String into another</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/longest-increasing-subsequence/"><b>5.3</b> - Longest Increasing Subsequence</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/maximum-sum-increasing-subsequence/"><b>5.4</b> - Maximum Sum Increasing Subsequence</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/shortest-common-super-sequence/"><b>5.5</b> - Shortest Common Super-sequence</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/minimum-deletions-to-make-a-sequence-sorted/"><b>5.6</b> - Minimum Deletions to Make a Sequence Sorted</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/longest-repeating-subsequence/"><b>5.7</b> - Longest Repeating Subsequence</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/subsequence-pattern-matching/"><b>5.8</b> - Subsequence Pattern Matching</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/longest-bitonic-subsequence/"><b>5.9</b> - Longest Bitonic Subsequence</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/longest-alternating-subsequence/"><b>5.10</b> - Longest Alternating Subsequence</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/edit-distance/"><b>5.11</b> - Edit Distance</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/longest-common-substring/strings-interleaving/"><b>5.12</b> - Strings Interleaving</a> <br> </nav> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=rod_cutting ><a href="#rod_cutting" class=header-anchor >Rod Cutting</a></h1> <span style="font-size:24px;font-weight:300;">We'll cover the following</span> <div class=blank ></div> <div class=franklin-toc ><ol><li><a href="#problem_statement">Problem Statement</a><li><a href="#basic_solution">Basic Solution</a><li><a href="#bottom-up_dynamic_programming">Bottom-up Dynamic Programming</a><ol><li><a href="#code">Code</a></ol><li><a href="#find_the_selected_items">Find the selected items</a><li><a href="#next">Next</a></ol></div> <div class=blank ></div> <h2 id=problem_statement ><a href="#problem_statement" class=header-anchor >Problem Statement</a></h2> <div class="admonition question"> <div class=admonition-title >🙋 Question</div> <div class=admonition-content >Given a rod of length <code>n</code>, we are asked to cut the rod and sell the pieces in a way that will maximize the profit. We are also given the price of every piece of length <code>i</code> where <code>1 &lt;&#61; i &lt;&#61; n</code>.</div> </div> <ul> <li><p>Example </p> </ul> <pre><code class="Plaintext hljs">Lengths: [1, 2, 3, 4, 5]
Prices: [2, 6, 7, 10, 13]
Rod Length: 5

Let’s try different combinations of cutting the rod:

Five pieces of length 1 =&gt; 10 price
Two pieces of length 2 and one piece of length 1 =&gt; 14 price
One piece of length 3 and two pieces of length 1 =&gt; 11 price
One piece of length 3 and one piece of length 2 =&gt; 13 price
One piece of length 4 and one piece of length 1 =&gt; 12 price
One piece of length 5 =&gt; 13 price</code></pre> <div class=admonition ><div class=admonition-title >Info</div> <div class=content >This shows that we get the maximum price &#40;14&#41; by cutting the rod into two pieces of length <code>2</code> and one piece of length <code>1</code>.</div></div> <h2 id=basic_solution ><a href="#basic_solution" class=header-anchor >Basic Solution</a></h2> <p>This problem can be mapped to the <a href="/Dynamic-Programming-Patterns/unbounded-knapsack/">Unbounded Knapsack</a> pattern. The <code>Weights</code> array of the Unbounded Knapsack problem is equivalent to the <code>Lengths</code> array, and Profits is equivalent to Prices.</p> <p>A basic brute-force solution could be to try all combinations of the given rod lengths to choose the one with the maximum sale price. This is what our algorithm will look like:</p> <pre><code class="Plaintext hljs">for each rod length &#x27;i&#x27; 
    create a new set which includes one quantity of length &#x27;i&#x27;, and recursively process 
        all rod lengths for the remaining length 
    create a new set without rod length &#x27;i&#x27;, and recursively process for remaining rod lengths
return the set from the above two sets with a higher sales price</code></pre> <p>Since this problem is quite similar to <a href="/Dynamic-Programming-Patterns/unbounded-knapsack/">Unbounded Knapsack</a> , let’s jump directly to the bottom-up dynamic solution.</p> <h2 id=bottom-up_dynamic_programming ><a href="#bottom-up_dynamic_programming" class=header-anchor >Bottom-up Dynamic Programming</a></h2> <p>Let’s try to populate our <code>dp&#91;&#93;&#91;&#93;</code> array in a bottom-up fashion. Essentially, what we want to achieve is: “Find the maximum sales price for every rod length and for every possible sales price”.</p> <p>So for every possible rod length <code>len</code> &#40;0&lt;&#61; len &lt;&#61; n&#41;, we have two options:</p> <ul> <li><p>Exclude the piece. In this case, we will take whatever price we get from the rod length excluding this piece &#61;&gt; <code>dp&#91;index-1&#93;&#91;len&#93;</code></p> <li><p>Include the piece if its length is not more than ‘len’. In this case, we include its price plus whatever price we get from the remaining rod length &#61;&gt; <code>prices&#91;index&#93; &#43; dp&#91;index&#93;&#91;len-lengths&#91;index&#93;&#93;</code></p> </ul> <p>Finally, we have to take the maximum of the above two values:</p> <pre><code class="Plaintext hljs">dp[index][len] = max (dp[index-1][len], prices[index] + dp[index][len-lengths[index]])</code></pre>
<p>Let’s draw this visually, with the example:</p>
<pre><code class="Plaintext hljs">Lengths: [1, 2, 3, 4, 5]  
Prices: [2, 6, 7, 10, 13]  
Rod Length: 5</code></pre>
<p>Let’s start with our base case of zero size:</p>
<p><img src="/Dynamic-Programming-Patterns/assets/img/unbounded-knapsack/2.5.png" alt="" /></p>
<h3 id=code ><a href="#code" class=header-anchor >Code</a></h3>
<p>Here is the code for our bottom-up dynamic programming approach:</p>
<pre><code class="python hljs"><span class=hljs-keyword >def</span> <span class="hljs-title function_">solve_rod_cutting</span>(<span class=hljs-params >lengths, prices, n</span>):
    lengthCount = <span class=hljs-built_in >len</span>(lengths)
    <span class=hljs-comment ># base checks</span>
    <span class=hljs-keyword >if</span> n &lt;= <span class=hljs-number >0</span> <span class=hljs-keyword >or</span> lengthCount == <span class=hljs-number >0</span> <span class=hljs-keyword >or</span> <span class=hljs-built_in >len</span>(prices) != lengthCount:
        <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>

    dp = [[<span class=hljs-number >0</span> <span class=hljs-keyword >for</span> _ <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(n+<span class=hljs-number >1</span>)] <span class=hljs-keyword >for</span> _ <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(lengthCount)]

    <span class=hljs-comment ># process all rod lengths for all prices</span>
    <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(lengthCount):
        <span class=hljs-keyword >for</span> length <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(<span class=hljs-number >1</span>, n+<span class=hljs-number >1</span>):
            p1, p2 = <span class=hljs-number >0</span>, <span class=hljs-number >0</span>
            <span class=hljs-keyword >if</span> lengths[i] &lt;= length:
                p1 = prices[i] + dp[i][length - lengths[i]]
            <span class=hljs-keyword >if</span> i &gt; <span class=hljs-number >0</span>:
                p2 = dp[i - <span class=hljs-number >1</span>][length]
            dp[i][length] = <span class=hljs-built_in >max</span>(p1, p2)

    <span class=hljs-comment ># maximum price will be at the bottom-right corner.</span>
    <span class=hljs-keyword >return</span> dp[lengthCount - <span class=hljs-number >1</span>][n]


<span class=hljs-keyword >def</span> <span class="hljs-title function_">main</span>():
    <span class=hljs-built_in >print</span>(solve_rod_cutting([<span class=hljs-number >1</span>, <span class=hljs-number >2</span>, <span class=hljs-number >3</span>, <span class=hljs-number >4</span>, <span class=hljs-number >5</span>], [<span class=hljs-number >2</span>, <span class=hljs-number >6</span>, <span class=hljs-number >7</span>, <span class=hljs-number >10</span>, <span class=hljs-number >13</span>], <span class=hljs-number >5</span>))


main()</code></pre>

    <div class="admonition complexity">
        <div class=admonition-title >👉 Complexity</div>
        <div class=admonition-content >The above solution has time and space complexity of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy=false >(</mo><mi>N</mi><mo>∗</mo><mi>C</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">O(N*C)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class=mopen >(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >∗</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class=mclose >)</span></span></span></span>, where <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> represents total numbers and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span> is the desired sum.</div>
    </div>
    
<h2 id=find_the_selected_items ><a href="#find_the_selected_items" class=header-anchor >Find the selected items</a></h2>
<p>As we know, the final price is at the right-bottom corner; hence we will start from there to find the rod lengths.</p>
<p>As you remember, at every step we had two options: include a rod piece or skip it. If we skip it, then we take the price from the cell right above it; if we include it, then we jump to the remaining length to find more pieces.</p>
<p>Let&#39; s understand this from the above example:</p>
<ul>
<li><p><code>14</code> did come from the top cell, so we jump to the fourth row.</p>

<li><p><code>14</code> came from the top cell, so we jump to the third row.</p>

<li><p>Again, <code>14</code> came from the top cell, so we jump to the second row.</p>

<li><p>Now <code>14</code> is different from the top cell, so we must include rod of length <code>2</code>. After this, we subtract the price of the rod of length <code>2</code> from <code>14</code> and jump to that cell.</p>

<li><p><code>8</code> is different than the top cell, so we must include rod of length <code>2</code> again. After this, we subtract the price of the rod of length <code>2</code> from <code>8</code> and jump to that cell.</p>

<li><p><code>2</code> did come from the top cell, so we jump to the first row.</p>

<li><p>Now we must include a piece of length <code>1</code>. So the desired rod lengths are &#123;2, 2, 1&#125;.</p>

</ul>
<p><img src="/Dynamic-Programming-Patterns/assets/img/unbounded-knapsack/2.6.svg" alt="" /></p>
<h2 id=next ><a href="#next" class=header-anchor >Next</a></h2>
<div class=flist ><ul>
<li><p><a href="/Dynamic-Programming-Patterns/unbounded-knapsack/coin-change" id=goto ><span id=check >&check;</span><span id=arrow ><b>&rarr;</b></span></a> Coin Change</p>

</ul></div>
<div class=page-foot >
  <div class=copyright >
    &copy; Qling Alter. Last modified: June 20, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div> 
    </div> 
    </div> <!-- end of class page-wrap-->