<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/libs/katex/katex.min.css"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/libs/highlight/github.min.css"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/css/franklin.css"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/css/poole_hyde.css"> <link rel=stylesheet  href="/Dynamic-Programming-Patterns/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <title>Maximum Ribbon Cut</title> <script src="/Dynamic-Programming-Patterns/libs/lunr/lunr.min.js"></script> <script src="/Dynamic-Programming-Patterns/libs/lunr/lunr_index.js"></script> <script src="/Dynamic-Programming-Patterns/libs/lunr/lunrclient.min.js"></script> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <br> <img src="/Dynamic-Programming-Patterns/assets/infra/DP.svg" style="width: 160px; height: auto; display: inline"> <h1> <div style="line-height:18px; font-size: 20px; opacity: 0.85"><a href="/Dynamic-Programming-Patterns/">Dynamic Programming Patterns</a></div> </h1> <div style="line-height:18px; font-size: 15px; opacity: 0.85">by <a href="https://github.com/rfhklwt">Inia Owlet</a></div> </div> <br> <style> </style> <nav class=sidebar-nav  style="opacity: 0.9"> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/"><b>Overview</b></a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/introduction"><b>Introduction</b></a> <br> <div class=course-section >Pattern 1: 0/1 Knapsack</div> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/"><b>1.0</b> - 0/1 Knapsack</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/equal-subset-sum-partition/"><b>1.1</b> - Equal Subset Sum Partition</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/subset-sum/"><b>1.2</b> - Subset Sum</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/minimum-subset-sum-difference/"><b>1.3</b> - Minimum Subset Sum Difference</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/count-of-subset-sum/"><b>1.4</b> - Count of Subset Sum</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/0-1-knapsack/target-sum/"><b>1.5</b> - Target Sum</a> <div class=course-section >Pattern 2: Unbounded Knapsack</div> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/unbounded-knapsack/"><b>2.0</b> - Unbouned Knapsack</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/unbounded-knapsack/rod-cutting/"><b>2.1</b> - Rod Cutting</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/unbounded-knapsack/coin-change/"><b>2.2</b> - Coin Change</a> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/unbounded-knapsack/minimum-coin-change/"><b>2.3</b> - Minimum Coin Change</a> <a class="sidebar-nav-item active" href="/Dynamic-Programming-Patterns/unbounded-knapsack/maximum-ribbon-cut/"><b>2.4</b> - Maximum Ribbon Cut</a> <div class=course-section >Pattern 3: Fast & Slow Pointers</div> <a class="sidebar-nav-item " href="/Dynamic-Programming-Patterns/fibonacci-numbers/"><b>3.0</b> - Fibonacci Numbers</a> <br> </nav> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=maximum_ribbon_cut ><a href="#maximum_ribbon_cut" class=header-anchor >Maximum Ribbon Cut</a></h1> <span style="font-size:24px;font-weight:300;">We'll cover the following</span> <div class=blank ></div> <div class=franklin-toc ><ol><li><a href="#introduction">Introduction</a><li><a href="#problem_statement">Problem Statement</a><li><a href="#basic_solution">Basic Solution</a><ol><li><a href="#code">Code</a></ol><li><a href="#bottom-up_dynamic_programming">Bottom-up Dynamic Programming</a><ol><li><a href="#code__2">Code</a></ol><li><a href="#next">Next</a></ol></div> <h2 id=introduction ><a href="#introduction" class=header-anchor >Introduction</a></h2> <div class="admonition question"> <div class=admonition-title >ðŸ™‹ Question</div> <div class=admonition-content >We are given a ribbon of length <code>n</code> and a set of possible ribbon lengths. We need to cut the ribbon into the maximum number of pieces that comply with the above-mentioned possible lengths. Write a method that will return the count of pieces.</div> </div> <ul> <li><p>Example 1</p> </ul> <pre><code class="Plaintext hljs">n: 5
Ribbon Lengths: {2,3,5}
Output: 2
Explanation: Ribbon pieces will be {2,3}.</code></pre> <ul> <li><p>Example 2</p> </ul> <pre><code class="Plaintext hljs">n: 7
Ribbon Lengths: {2,3}
Output: 3
Explanation: Ribbon pieces will be {2,2,3}.</code></pre> <ul> <li><p>Example 3</p> </ul> <pre><code class="Plaintext hljs">n: 13
Ribbon Lengths: {3,5,7}
Output: 3
Explanation: Ribbon pieces will be {3,3,7}.</code></pre> <h2 id=problem_statement ><a href="#problem_statement" class=header-anchor >Problem Statement</a></h2> <div class="admonition question"> <div class=admonition-title >ðŸ™‹ Question</div> <div class=admonition-content >Given a number array to represent possible ribbon lengths and a total ribbon length <code>n</code>, we need to find the maximum number of pieces that the ribbon can be cut into.</div> </div> <div class="admonition hint"> <div class=admonition-title >Hint</div> <div class=admonition-content >This problem follows the <a href="/Dynamic-Programming-Patterns/unbounded-knapsack/">Unbounded Knapsack</a> pattern and is quite similar to <a href="/Dynamic-Programming-Patterns/unbounded-knapsack/minimum-coin-change">Minimum Coin Change</a> &#40;MCC&#41;. The only difference is that in MCC, we were asked to find the <strong>minimum</strong> number of coin changes, whereas, in this problem, we need to find the <strong>maximum</strong> number of pieces.</div> </div> <h2 id=basic_solution ><a href="#basic_solution" class=header-anchor >Basic Solution</a></h2> <p>A basic brute-force solution could be to try all combinations of the given lengths to select the maximum one that gives the total length of <code>n</code>. This is what our algorithm will look like:</p> <pre><code class="Plaintext hljs">for each length &#x27;l&#x27; 
    create a new set which includes one quantity of length &#x27;l&#x27; if it does not exceed &#x27;n&#x27;, and 
        recursively call to process all lengths 
    create a new set without length &#x27;l&#x27;, and recursively call to process the remaining lengths
return the number of pieces from the above two sets with a higher number of pieces</code></pre> <h3 id=code ><a href="#code" class=header-anchor >Code</a></h3> <p>Here is the code for the brute-force solution:</p> <pre><code class="python hljs"><span class=hljs-keyword >import</span> math


<span class=hljs-keyword >def</span> <span class="hljs-title function_">count_ribbon_pieces</span>(<span class=hljs-params >ribbonLengths, total</span>):
    maxPieces = count_ribbon_pieces_recursive(ribbonLengths, total, <span class=hljs-number >0</span>)
    <span class=hljs-keyword >return</span> -<span class=hljs-number >1</span> <span class=hljs-keyword >if</span> maxPieces == -math.inf <span class=hljs-keyword >else</span> maxPieces


<span class=hljs-keyword >def</span> <span class="hljs-title function_">count_ribbon_pieces_recursive</span>(<span class=hljs-params >ribbonLengths, total, currentIndex</span>):
    <span class=hljs-comment ># base check</span>
    <span class=hljs-keyword >if</span> total == <span class=hljs-number >0</span>:
        <span class=hljs-keyword >return</span> <span class=hljs-number >0</span>

    n = <span class=hljs-built_in >len</span>(ribbonLengths)
    <span class=hljs-keyword >if</span> n == <span class=hljs-number >0</span> <span class=hljs-keyword >or</span> currentIndex &gt;= n:
        <span class=hljs-keyword >return</span> -math.inf

    <span class=hljs-comment ># recursive call after selecting the ribbon length at the currentIndex</span>
    <span class=hljs-comment ># if the ribbon length at the currentIndex exceeds the total, we shouldn&#x27;t process this</span>
    c1 = -math.inf
    <span class=hljs-keyword >if</span> ribbonLengths[currentIndex] &lt;= total:
        result = count_ribbon_pieces_recursive(
            ribbonLengths, total - ribbonLengths[currentIndex], currentIndex)
        <span class=hljs-keyword >if</span> result != -math.inf:
            c1 = result + <span class=hljs-number >1</span>

    <span class=hljs-comment ># recursive call after excluding the ribbon length at the currentIndex</span>
    c2 = count_ribbon_pieces_recursive(ribbonLengths, total, currentIndex + <span class=hljs-number >1</span>)
    <span class=hljs-keyword >return</span> <span class=hljs-built_in >max</span>(c1, c2)


<span class=hljs-keyword >def</span> <span class="hljs-title function_">main</span>():
    <span class=hljs-built_in >print</span>(count_ribbon_pieces([<span class=hljs-number >2</span>, <span class=hljs-number >3</span>, <span class=hljs-number >5</span>], <span class=hljs-number >5</span>))
    <span class=hljs-built_in >print</span>(count_ribbon_pieces([<span class=hljs-number >2</span>, <span class=hljs-number >3</span>], <span class=hljs-number >7</span>))
    <span class=hljs-built_in >print</span>(count_ribbon_pieces([<span class=hljs-number >3</span>, <span class=hljs-number >5</span>, <span class=hljs-number >7</span>], <span class=hljs-number >13</span>))
    <span class=hljs-built_in >print</span>(count_ribbon_pieces([<span class=hljs-number >3</span>, <span class=hljs-number >5</span>], <span class=hljs-number >7</span>))


main()</code></pre> <div class="admonition complexity"> <div class=admonition-title >ðŸ‘‰ Complexity</div> <div class=admonition-content >The above algorithmâ€™s time complexity is exponential <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy=false >(</mo><msup><mn>2</mn><mrow><mi>L</mi><mo>+</mo><mi>T</mi></mrow></msup><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">O(2^{L+T})</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class=mopen >(</span><span class=mord ><span class=mord >2</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span><span class=mclose >)</span></span></span></span>, where <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span></span></span></span> represents total ribbon lengths, and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> is the total length that we want to cut. The space complexity will be <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy=false >(</mo><mi>L</mi><mo>+</mo><mi>T</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">O(L+T)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class=mopen >(</span><span class="mord mathdefault">L</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class=mclose >)</span></span></span></span>.</div> </div> <p>Since this problem is quite similar to <a href="/Dynamic-Programming-Patterns/unbounded-knapsack/minimum-coin-change">Minimum Coin Change</a>, letâ€™s jump on to the bottom-up dynamic programming solution.</p> <h2 id=bottom-up_dynamic_programming ><a href="#bottom-up_dynamic_programming" class=header-anchor >Bottom-up Dynamic Programming</a></h2> <p>Letâ€™s try to populate our array <code>dp&#91;ribbonLength&#93;&#91;total&#43;1&#93;</code> for every possible ribbon length with a maximum number of pieces.</p> <p>So for every possible length <code>len</code> &#40;0 &lt;&#61; len &lt;&#61; total&#41; and for every possible ribbon length index &#40;0 &lt;&#61; index &lt; ribbonLengths.length&#41;, we have two options:</p> <ul> <li><p><strong>Exclude the ribbon length</strong>: In this case, we will take the maximum piece count from the previous set &#61;&gt; <code>dp&#91;index-1&#93;&#91;len&#93;</code></p> <li><p><strong>Include the ribbon length</strong> if its value is not more than <code>len</code>: In this case, we will take the maximum pieces needed to get the remaining total, plus include <code>1</code> for the current ribbon length &#61;&gt; <code>1 &#43; dp&#91;index&#93;&#91;len-ribbonLengths&#91;index&#93;&#93;</code></p> </ul> <p>Finally, we will take the maximum of the above two values for our solution:</p> <pre><code class="Plaintext hljs">dp[index][len] = max(dp[index-1][len], 1 + dp[index][len-ribbonLengths[index]])</code></pre>
<h3 id=code__2 ><a href="#code__2" class=header-anchor >Code</a></h3>
<p>Here is the code for our bottom-up dynamic programming approach:</p>
<pre><code class="python hljs"><span class=hljs-keyword >import</span> math


<span class=hljs-keyword >def</span> <span class="hljs-title function_">count_ribbon_pieces</span>(<span class=hljs-params >ribbonLengths, total</span>):
    n = <span class=hljs-built_in >len</span>(ribbonLengths)
    dp = [[-math.inf <span class=hljs-keyword >for</span> _ <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(total+<span class=hljs-number >1</span>)] <span class=hljs-keyword >for</span> _ <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(n)]

    <span class=hljs-comment ># populate the total=0 columns, as we don&#x27;t need any ribbon to make zero total</span>
    <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(n):
        dp[i][<span class=hljs-number >0</span>] = <span class=hljs-number >0</span>

    <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(n):
        <span class=hljs-keyword >for</span> t <span class=hljs-keyword >in</span> <span class=hljs-built_in >range</span>(<span class=hljs-number >1</span>, total+<span class=hljs-number >1</span>):
            <span class=hljs-keyword >if</span> i &gt; <span class=hljs-number >0</span>:  <span class=hljs-comment ># exclude the ribbon</span>
                dp[i][t] = dp[i - <span class=hljs-number >1</span>][t]
            <span class=hljs-comment ># include the ribbon and check if the remaining length can be cut into available lengths</span>
            <span class=hljs-keyword >if</span> t &gt;= ribbonLengths[i] <span class=hljs-keyword >and</span> dp[i][t - ribbonLengths[i]] != -math.inf:
                dp[i][t] = <span class=hljs-built_in >max</span>(dp[i][t], dp[i][t - ribbonLengths[i]] + <span class=hljs-number >1</span>)

    <span class=hljs-comment ># total combinations will be at the bottom-right corner, return &#x27;-1&#x27; if cutting is not possible</span>
    <span class=hljs-keyword >return</span> -<span class=hljs-number >1</span> <span class=hljs-keyword >if</span> dp[n - <span class=hljs-number >1</span>][total] == -math.inf <span class=hljs-keyword >else</span> dp[n - <span class=hljs-number >1</span>][total]


<span class=hljs-keyword >def</span> <span class="hljs-title function_">main</span>():
    <span class=hljs-built_in >print</span>(count_ribbon_pieces([<span class=hljs-number >2</span>, <span class=hljs-number >3</span>, <span class=hljs-number >5</span>], <span class=hljs-number >5</span>))
    <span class=hljs-built_in >print</span>(count_ribbon_pieces([<span class=hljs-number >2</span>, <span class=hljs-number >3</span>], <span class=hljs-number >7</span>))
    <span class=hljs-built_in >print</span>(count_ribbon_pieces([<span class=hljs-number >3</span>, <span class=hljs-number >5</span>, <span class=hljs-number >7</span>], <span class=hljs-number >13</span>))
    <span class=hljs-built_in >print</span>(count_ribbon_pieces([<span class=hljs-number >3</span>, <span class=hljs-number >5</span>], <span class=hljs-number >7</span>))


main()</code></pre>

    <div class="admonition complexity">
        <div class=admonition-title >ðŸ‘‰ Complexity</div>
        <div class=admonition-content >The above solution has time and space complexity of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy=false >(</mo><mi>L</mi><mo>âˆ—</mo><mi>N</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">O(L*N)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class=mopen >(</span><span class="mord mathdefault">L</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >âˆ—</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class=mclose >)</span></span></span></span>, where <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span></span></span></span> represents total ribbon lengths and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> is the total length that we want to cut.</div>
    </div>
    
<h2 id=next ><a href="#next" class=header-anchor >Next</a></h2>
<div class=flist ><ul>
<li><p><a href="/Dynamic-Programming-Patterns/fibonacci-numbers/" id=goto ><span id=check >&check;</span><span id=arrow ><b>&rarr;</b></span></a> Fibonacci Numbers</p>

</ul></div>
<div class=page-foot >
  <div class=copyright >
    &copy; Qling Alter. Last modified: June 09, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div> 
    </div> 
    </div> <!-- end of class page-wrap-->